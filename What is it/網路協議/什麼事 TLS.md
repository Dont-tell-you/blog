# 什麼事 TLS

## 什麼事 TLS
    它是安全協定介於傳輸層與應用層之間，主要是定義安全傳輸的協定與格式，早期版本稱為 SSL 而 TLS 版本建立在原本 SSL 之上，
    TLS 版本是 IETF 建立標準化後重新命名的稱呼，TLS 是主從式架構讓兩個服務透過網路通訊建立起安全的連線，
    TLS 可以無耦合的與應用層協定一起使用，也就是說在應用層可選擇用 TLS 建立起安全的連線或是選擇用 TCP、UDP 建立連線。

### 為什麼需要 TLS
    網路是不安全性的，如果不進行加密傳輸會有三個風險竊聽、篡改、冒充，在網路傳輸過程無進行加密，
    就無法確定這個訊息有沒有被第三人知道、無法確定訊息的正確性，無法確定通訊者是本人，TLS 使用混合加密邏輯，
    使用公鑰密鑰把後續通訊用的對稱密鑰加密起來，之後使用對稱加密傳輸內容。

#### 優點
    藉由加密機制，確保第三方無法竊聽。
    有校驗機制，確保無法篡改。
    有身分證機制，確保是本人。

### TLS 通訊方式
    客戶端向服務端要求加密的連線，並驗證公鑰。
    雙方確認生成對稱加密方式。
    雙方通訊使用對稱加密方式進行通訊。

### 信鴿解釋通訊方式
    角色：愛麗絲 (傳訊者)、鮑伯 (接收者)、泰德 (可信任的第三人)、馬洛里 (第三人攻擊者)、信鴿 (訊息)、盒子 (公鑰)、打開盒子 (私鑰)

    第一版本
        愛麗絲用信鴿傳訊給鮑伯，在此流程馬洛里可以攔截信鴿後，可以修改訊息、讀取訊後再傳訊出去、可以為裝成愛麗絲傳訊給鮑伯訊息，
        由於訊息都是未加密的所以可以任意處理。
    第二版本
        愛麗絲為了避免被知道訊息內容使用了對稱加密方式，所以將訊息用對稱加密後再由信鴿傳送資料，馬洛里攔截後無法解讀內容，
        也就無法知道訊息、修改資訊、無法為裝成愛麗絲，因為不知道加密邏輯ㄓ，但對稱加密是不安全的，可以用長時間方式進行電腦驗算找出加密的規律，
        另外對稱加密是要雙方知道加密的邏輯，所以鮑伯如果不知道加密的邏輯也無法進行解密，鮑伯如果要知道代表第一次愛麗絲還是要傳送我怎麼加密的訊息明文給鮑伯，
        這樣馬洛里還是會知道加密的邏輯。
    第三版本
        愛麗絲產生一組盒子與解鎖的鑰匙，愛麗絲將盒子傳給鮑伯，這樣鮑伯就可以把訊息放進盒子，傳回給愛麗絲也不怕被馬洛里攔截了，
        如何證明盒子是愛麗絲發送的，盒子上必須要有人簽名認證是愛麗絲本人的盒子，泰德負責確認盒子的真實性後再盒子上簽名擔保盒子的真實性。
    完整版本
        愛麗絲先找泰德認證自己的盒子，泰德確認後在盒子上簽名，愛麗絲用信鴿傳遞盒子給鮑伯，鮑伯確認盒子上有泰德簽名代表可以信任盒子，
        鮑伯用盒子傳遞訊息給愛麗絲，這樣就達到安全的傳送方式，也不避擔心馬洛里攔截，因為馬洛里不仿造出有泰德簽名的盒子，
        但每次用盒子傳送效率太低，所以透過盒子傳遞對稱的對稱加密密鑰，之後就可以安心透過對稱加密密鑰通訊。

### 總結
    TLS 是一個安全協議，在網路環境是不安全的透過 TLS 加密的協議，讓網路建立起安全的連結安心安全地傳遞資料，
    這一切的流程需要一個可以被信任得第三方機制稱為認證機構，認證機構驗證公鑰與身份的驗證，客戶端與伺服器端信任認證機構的證書，
    驗證是否為認證機構的證書，驗證過程提供對稱加密的邏輯，驗證成功後後續使用對稱加密的加密訊息傳訊走 HTTP 方式。

---
- 備註
    <br/>
    傳輸層安全性協定（英語：Transport Layer Security，縮寫：TLS）及其前身安全通訊協定（英語：Secure Sockets Layer，縮寫：SSL）是一種安全協定。
    <br/>
    對稱密鑰加密：加密和解密使用同一個密鑰。
    <br/>
    非對稱密鑰加密：使用一對密鑰用於加密與解密，分別為公鑰、私鑰。
    <br/>
    認證機構：是對證書的管理機構，主要功能是對註冊公鑰的人進行身份認證，此機構建立信基礎上。
    <br/>
    公鑰：提供給網路上任何人使用。
    <br/>
    私鑰：個人持有。
    <br/>
    數據簽證：私鑰負責加密 (生成簽名)，公鑰解密 (驗證簽名)。
    <br/>
    公鑰算法：公鑰負責加密 (傳輸資料)，私鑰負責解密 (驗證是自己的公鑰加密)。

- 參考
    <br/>
    [維基百科-TLS](https://zh.wikipedia.org/wiki/%E5%82%B3%E8%BC%B8%E5%B1%A4%E5%AE%89%E5%85%A8%E6%80%A7%E5%8D%94%E5%AE%9A)
    <br/>
    [維基百科-CA](https://zh.wikipedia.org/wiki/%E8%AF%81%E4%B9%A6%E9%A2%81%E5%8F%91%E6%9C%BA%E6%9E%84)
    <br/>
    [SSL/TLS 原理详解](https://cloud.tencent.com/developer/article/1114555)
    <br/>
    [HTTPS 温故知新（一） — 开篇 - 冰霜之地](https://halfrost.com/https-begin/)
    <br/>
    [无处不在的数字签名 - 冰霜之地](https://halfrost.com/digital_signature/)
    <br/>
    [随处可见的公钥证书 - 冰霜之地](https://halfrost.com/digital_certificate/)
    <br/>
    [分分钟让你理解HTTPS](https://juejin.im/post/6844903599303032845)
    <br/>
    [用信鸽来解释 HTTPS](https://mp.weixin.qq.com/s?__biz=MzI4Njc5NjM1NQ==&mid=2247485207&idx=1&sn=64827cd627ad08798d21076cef1b7cfa&chksm=ebd6383bdca1b12de54dc4e157543b2ff63fc8c876a73f830d3855760b90ae109b239ade633f&mpshare=1&scene=24&srcid=0416kj0u5u9OKS1MIT61ETQM#rd)
    <br/>
    [阮一峰-SSL/TLS协议运行机制的概述](https://ruanyifeng.com/blog/2014/02/ssl_tls.html)
    