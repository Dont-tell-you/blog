# 什麼事 OSI、TCP/IP、TCP、UDP

## 什麼事 OSI
    OSI 定義出互聯網系統概念的參考模型，主要互聯網抽象出七個層次，
    它對各層次做出粗略的細分、對設計協議作為一個引導的作用。
    七個層為
        第 7 層 應用層（提供給應用軟體的介面，可以與另一個應用軟體之間通訊）
        第 6 層 表達層（把數據轉換成系統格式相容並適合傳輸的格式）
        第 5 層 會議層（負責在數據傳輸中設定和維護電腦網路中兩台電腦之間的通訊連結）
        第 4 層 傳輸層（把傳輸表頭加入數據以行程數據包）
        第 3 層 網路層（負責數據的路徑選擇和轉寄，將網路表頭加入數據包以形成封包）
        第 2 層 資料連結層（負責網路尋址、錯誤偵測和改錯）
        第 1 層 實體層（負責管理電腦通訊裝置和網路媒體之間的互通）

## 什麼事 TCP/IP
    TCP/IP 是一個網路通訊的模型，提供點到點之間的連結機制，將資料如何封裝、定址、傳輸、路由、目的地接收都標準化，
    主要是針對網路通訊過程抽象化為四個層。
    四個層為
        第 4 層 應用層（所有和應用程式協同的工作，利用基礎網路交換應用程式專用的資料的協定）
        第 3 層 傳輸層（定義傳輸到電腦的上的應用程式）
        第 2 層 網路互連層（定義 IP 協定，利用 IP 可以定位到那個地區）
        第 1 層 網路存取（連結）層（建立兩個電腦實體的連線，並會給電腦 MAC 當作門牌）

### 為什麼需要 TCP/IP
    OSI 模型只是一個概念性框架，並無實際的標準化，TCP/IP 是針對網路通訊過程抽象並標準化，
    可以把 TCP/IP 視為簡化的 OSI 模型。

## 什麼事 TCP
    在傳輸層的一個傳輸資料的協議，主要是面向連結、可靠的的協議，組成資料中利用序號來解決亂序問題，
    在網路世界可能先傳送後到達，用序號可以排序、去重，另一個針對傳輸的速度控制窗口，
    窗口背後使用 流量控制 + 擁塞控制，因為接收段處理速度過慢或網路出現異常，用窗口控制處理能力。

### 為什麼需要 TCP
    在應用層負責定義服務跟服務之間如何交流，傳輸層除了傳送資料外需要保證資料可達到的，
    每個層次負責一項責任，用 TCP 保證在網路這個不穩定環境保證資料可達的這個困難的任務。

### TCP 三次握手
    因為網路是不可靠的，需要透過握手方式確認雙方的請求、回應都是可正常執行的，
    如果要知道是不是正常雙方都要得到對方的請求與接收到自己上次請求的回應。
    
    Ａ發送握手，Ｂ接收到訊息
        此狀態代表Ｂ知道Ａ的請求功能正常，Ｂ自己的接收是正常的，Ａ還不清楚是否傳送到
    Ｂ回應Ａ的握手，同時Ｂ可以傳送訊息
        因為正常是一應一答，但為了提高效率，在這次同時做回應與請求為一次處理掉
        此狀態Ａ知道我上次的請求是正常，同時接收到Ｂ的請求，也代表Ａ接收是正常的
        Ａ已確認好自己的請求與接收能力正常，Ｂ還不清楚是否自己的請求被接收成功
    Ａ回應Ｂ的請求
        此狀態Ｂ接收到自己請求的回應，Ｂ已確認好自己的請求與接收能力正常

### TCP 四次揮手
    關閉過程是第一步告知對方我不在傳送資料，確定對方真的接收完畢後，才能做真正的關閉，
    所以中間步驟無法同時執行故需要四次動作。
    
    Ａ告知Ｂ我不在發送資料，Ｂ接收到準備關閉的訊息代表不會有新的資料
        此時Ａ不會再發送新的資料，Ｂ需要時間處理關閉前的動作
    Ｂ已經確定處理好，告知Ａ可以關閉連線
        此時Ａ的發送連結已關閉，但持續接收Ｂ的傳送
    Ｂ告知Ａ我不在發送資料，Ａ接收到準備關閉的訊息代表不會有新的資料
        此時Ｂ不會再發送新的資料，Ａ需要時間處理關閉前的動作
    Ａ已經確定處理好，告知Ｂ可以關閉連線
        此時Ｂ的接收連線也關閉，同時全部連線都斷開

#### TCP 優點
    可靠協議支持超時重傳、確定訊息可達、全雙工通信功能，因為處理消息必須到達相對速度慢，
    應用層協議可以無需理會消息是不是送到接收端，TCP 保證消息會送到接收端，
    適合網頁服務通信交換資料為了得到完整資料。

## 什麼事 UDP
    跟 TCP 一樣是在傳輸層的傳輸資料的協議，主要是面向無連結、不保證資料可達性，
    溝通簡單不需要太複雜的資料結構、處理邏輯，不會建立連結只是監聽端口，任何人可以傳送數給它並它傳送給任合人數據，
    不會管理接收端的處理能力只會不停地發送。

### 為什麼需要 UDP
    適合不在意資料完整性、將資料廣播出去，有些場景不需在乎資料是不是可達，
    因為不在乎資料可達的特性可以擁有佔用資源小、實時性高的等特性。

#### UDP 優點
    傳輸時間速度快，因為 UDP 並不保證消息可達，將資料傳送出去無需理會是不是在網路傳輸上卡住、遺失等情況，
    適合影片、檔案下載等功能，可在客戶端重新觸發功能或部分資料遺失也可接收的情況。

### 總結
    OSI、TCP/IP 都是把概念抽象出各個層次，OSI 是一個概念性框架，TCP/IP 是針對網路通訊過程的標準化協議。
    TCP、UDP 兩個都是重要的傳輸協議，適合不同場景使用，一般來說都在乎資料是必須傳送到的，
        但也有場景是廣播、資料允許部分遺失場景提高實時性，主要都是解決網路傳輸資料的問題側重點不同。

---
- 備註
    <br/>
    開放式系統互聯模型（英語：Open System Interconnection Model，縮寫：OSI；簡稱為OSI模型）是一種概念模型。
    <br/>
    網際網路協議（英語：Internet Protocol Suite，縮寫IPS）是一個網路通訊模型，以及一整個網路傳輸協定家族，為網際網路的基礎通訊架構。
    <br/>
    IPS 常被通稱為TCP/IP協定套組（英語：TCP/IP Protocol Suite，或TCP/IP Protocols），簡稱TCP/IP。
    <br/>
    傳輸控制協定（英語：Transmission Control Protocol，縮寫：TCP）是一種連接導向的、可靠的、基於位元組流的傳輸層通信協定。
    <br/>
    用戶資料報協定（英語：User Datagram Protocol，縮寫：UDP；又稱用戶資料包協定）是一個簡單的面向資料報的通信協定，位於OSI模型的傳輸層。

- 參考
    <br/>
    [維基百科-OSI 模型](https://zh.wikipedia.org/wiki/OSI%E6%A8%A1%E5%9E%8B)
    <br/>
    [維基百科-TCP/IP 模型](https://zh.wikipedia.org/wiki/TCP/IP%E5%8D%8F%E8%AE%AE%E6%97%8F)
    <br/>
    [維基百科-TCP](https://zh.wikipedia.org/wiki/%E4%BC%A0%E8%BE%93%E6%8E%A7%E5%88%B6%E5%8D%8F%E8%AE%AE)
    <br/>
    [維基百科-UDP](https://zh.wikipedia.org/wiki/%E7%94%A8%E6%88%B7%E6%95%B0%E6%8D%AE%E6%8A%A5%E5%8D%8F%E8%AE%AE)
    <br/>
    [TCP/IP 指南 - 冰霜之地](https://halfrost.com/tcp_ip/)
    <br/>
    [30-10之通訊協議的基本常識](https://ithelp.ithome.com.tw/articles/10205102)
    <br/>
    [点滴积累-网络协议 -- TCP上](http://zhongmingmao.me/2019/07/16/network-protocol-tcp-1/)
    <br/>
    [点滴积累-网络协议 -- TCP下](http://zhongmingmao.me/2019/07/17/network-protocol-tcp-2/)
    <br/>
    [点滴积累-网络协议 — UDP](http://zhongmingmao.me/2019/06/14/network-protocol-udp/)
    <br/>
    [木白的技术私厨-计算机网络笔记-运输层](http://cbsheng.github.io/posts/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%94%E8%AE%B0-%E8%BF%90%E8%BE%93%E5%B1%82/)
    <br/>
    [跟着动画来学习TCP三次握手和四次挥手](https://juejin.im/post/6844903625513238541)
    